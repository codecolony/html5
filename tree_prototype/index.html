<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
        <head>
                <title>Example</title>
                <meta http-equiv="content-type" content="text/html;charset=utf-8" />    
                <script type="text/javascript" src="js/jquery-1.9.0.js"></script>
                <script type="text/javascript" src="js/jquery-ui-1.9.2-min.js"></script>
                <script type="text/javascript" src="js/jquery.jsPlumb-1.4.1-all.js"></script>
                
                <style type="text/css">
                  .item {
                    border: 1px solid black;
                    background-color: #ddddff;
                  }
             
                  #container {
                    border: 1px solid gray;
                    width: 500px;
                    height: 500px;
                  }
                </style>
    
        </head>
        <body >
                <div id="container"></div>      
                        
                <script type="text/javascript">
                    jsPlumb.ready(function() {
 
                        var i = 0;
                     
                          $('#container').dblclick(function(e) {
                            var newState = $('<div>').attr('id', 'state' + i).addClass('item');
                            
                            var title = $('<div>').addClass('title').text('State ' + i);
                            var connect = $('<div>').addClass('connect');
                            
                            newState.css({
                              'top': e.pageY,
                              'left': e.pageX
                            });
                            
                            jsPlumb.makeTarget(newState, {
                              anchor: 'Continuous'
                            });
                            
                            jsPlumb.makeSource(connect, {
                              parent: newState,
                              anchor: 'Continuous'
                            });
                            
                            newState.append(title);
                            newState.append(connect);
                            
                            $('#container').append(newState);
                            
                            i++;    
                          });  
                        });
                </script>

        </body>
</html>
